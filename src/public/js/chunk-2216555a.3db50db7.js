(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2216555a"],{"02bc":function(t,e,s){"use strict";s("dbe8")},"4ddb":function(t,e,s){"use strict";var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"aside",attrs:{id:"aside"}},[s("div",{staticClass:"profile"},[t._m(0),s("div",{staticClass:"p_username"},[s("p",[t._v(" "+t._s(this.$store.state.user.username)+" ")])]),s("div",{staticClass:"details"},[s("p",{staticClass:"p_details"},[s("span",[t._v("Last log in:")]),t._v(" "+t._s(this.$store.state.user.last_log.substring(0,10)+" at "+this.$store.state.user.last_log.substring(11,16))+" ")]),s("p",{staticClass:"p_details"},[s("span",[t._v("From:")]),t._v(" "+t._s(this.$store.state.user.last_ip))])]),s("div",{staticClass:"optionDis"},[s("span",{staticClass:"opTitle"},[t._v("Theme")]),s("div",{staticClass:"switch",attrs:{id:"switch"}},[s("span",{attrs:{id:"swtButtom"},on:{click:function(e){return t.setTheme()}}})])])]),s("div",{attrs:{id:"nav"}},[s("router-link",{staticClass:"option",attrs:{to:"/dashboard"}},[s("div",[s("span",[t._v("Dashboard")])])]),s("router-link",{staticClass:"option",attrs:{to:"/actions"}},[s("div",[s("span",[t._v("Actions")])])]),100==this.$store.state.user.permissions?s("router-link",{staticClass:"option",attrs:{to:"/options"}},[s("div",[s("span",[t._v("Admin's panel")])])]):t._e(),s("router-link",{staticClass:"option",attrs:{to:"/account"}},[s("div",[s("span",[t._v("Account")])])]),s("router-link",{staticClass:"option",attrs:{to:"/about"}},[s("div",[s("span",[t._v("About")])])]),s("div",{staticClass:"option",on:{click:t.logout}},[s("span",[t._v("Log out")])])],1),s("router-view")],1)},a=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"prfimg"},[s("div",{staticClass:"imgbg"},[s("img",{staticClass:"primg",attrs:{src:"/api/profimage",alt:"img"}})])])}],o=s("bc3a"),i=s.n(o),r={name:"asideMenu",methods:{logout:function(){var t=this;i.a.get("/api/logout").then((function(){localStorage.removeItem("beacon"),t.$store.commit("logOut"),t.$router.push("/")})).catch((function(){localStorage.removeItem("beacon"),t.$store.commit("logOut"),t.$router.push("/")}))},setTheme:function(){var t=this;0==this.$store.getters.modeGetter?i.a.get("/api/theme/true").then((function(){var e=document.getElementById("switch");e.style.justifyContent="flex-end",e.style.background="#222831",document.getElementById("swtButtom").style.background="#fff",t.$store.commit("modeSetter")})).catch((function(t){console.log(t)})):i.a.get("/api/theme/false").then((function(){var e=document.getElementById("switch");e.style.justifyContent="flex-start",e.style.background="#fff",document.getElementById("swtButtom").style.background="#222831",t.$store.commit("modeSetter")})).catch((function(t){console.log(t)}))}},created:function(){var t=this;setTimeout((function(){if(document.getElementById("aside").style.color="#fff",0==t.$store.getters.modeGetter){var e=document.getElementById("switch");e.style.justifyContent="flex-start",e.style.background="#fff",document.getElementById("swtButtom").style.background="#222831"}else{var s=document.getElementById("switch");s.style.justifyContent="flex-end",s.style.background="#222831",document.getElementById("swtButtom").style.background="#fff"}}),500)}},l=r,d=(s("02bc"),s("2877")),u=Object(d["a"])(l,n,a,!1,null,null,null);e["a"]=u.exports},"7f1a":function(t,e,s){"use strict";s("fc1d")},b5c4:function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"body"}},[t._m(0),t._m(1),s("div",{staticClass:"usrname"},[s("h2",[t._v(" "+t._s(this.$store.state.user.username)+" ")])]),s("div",{staticClass:"setUser dv"},[s("div",[s("h3",[t._v("Set a new password:")]),s("span",[t._v("Insert your new password:")]),s("input",{attrs:{type:"password",id:"inpPassword"}}),t._m(2),s("div",{attrs:{id:"newControls"}},[s("h4",[t._v("To change your password first we need: ")]),s("span",[t._v("Confirm your new password")]),s("input",{attrs:{type:"password",id:"inpPasswordConf"}}),s("br"),s("span",[t._v("Your current password")]),s("input",{attrs:{type:"password",id:"inpPasswordCur"}}),s("input",{attrs:{type:"button",value:"Change password",id:"setNewPassword"},on:{click:function(e){return t.setPass()}}})]),s("p",{attrs:{id:"passRes"}})])]),s("div",{staticClass:"setProfileImg dv"},[s("div",[s("h3",[t._v("Set a new profile image:")]),s("input",{ref:"userimg",attrs:{type:"file",accept:"image/*",id:"file"},on:{change:function(e){return t.imgChanged()}}}),s("p",[s("span",[t._v("Last update:")]),t._v(" "+t._s(this.$store.state.user.profImg.updated.substring(0,10)+" at "+this.$store.state.user.profImg.updated.substring(11,16)))]),this.image?s("div",{staticClass:"btn_upld"},[s("input",{attrs:{id:"setNewimg",type:"button",value:"Set new image"},on:{click:function(e){return t.sendImg()}}})]):t._e(),s("p",{attrs:{id:"imgRes"}})])]),s("div",{staticClass:"AccountInfo dv"},[s("div",[s("h3",[t._v("Some info about your account and activity:")]),s("p",[s("span",[t._v("User id:")]),t._v(" "+t._s(this.$store.state.user._id))]),s("p",[s("span",[t._v("Username:")]),t._v(" "+t._s(this.$store.state.user.username))]),s("p",[s("span",[t._v("Last ip:")]),t._v(" "+t._s(this.$store.state.user.last_ip))]),s("p",[s("span",[t._v("Last login date:")]),t._v(" "+t._s(this.$store.state.user.last_log.substring(0,10)+" at "+this.$store.state.user.last_log.substring(11,16)))]),s("p",[s("span",[t._v("Account creation:")]),t._v(" "+t._s(this.$store.state.user.created.substring(0,10)+" at "+this.$store.state.user.created.substring(11,16)))]),s("br"),s("h4",[t._v("Log in registry :")]),t._l(t.registry,(function(e){return s("div",{key:e.date,staticClass:"register"},[s("p",[t._v(t._s(e.date.substring(0,10)+" at "+e.date.substring(11,16))+" from "+t._s(e.ip))])])}))],2)]),s("asideMenu")],1)},a=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"header"},[s("h1",[t._v("Account settings")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"prfimgA"},[s("img",{staticClass:"primgA",attrs:{src:"/api/profimage",alt:"img"}})])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("p",[s("span",[t._v("Last update: ")]),t._v("Here goes the update date")])}],o=s("4ddb"),i=s("bc3a"),r=s.n(i),l={name:"dashboard",title:"Beacon | Account settings",components:{asideMenu:o["a"]},data:function(){return{username:this.user,loginDate:this.lDate,loginIP:this.IP,registry:this.$store.state.user.registry,image:"",imgUploadRes:null}},methods:{imgChanged:function(){this.image=this.$refs.userimg.files[0]},sendImg:function(){var t=new FormData;t.append("file",this.image),r.a.post("/api/profimage",t,{headers:{"Content-Type":"multipart/form-data"}}).then((function(t){if(200==t.status){var e=document.getElementById("imgRes");e.style.display="block",e.style.textAlign="center",e.style.color="#fff",e.style.background="#529c52",e.style.borderBottom="3px solid #00aa00",e.style.padding="5px 15px 5px 15px",e.innerText="Your Image was changed",setTimeout((function(){e.style.display="none"}),5e3)}})).catch((function(){var t=document.getElementById("imgRes");t.style.display="block",t.style.textAlign="center",t.style.color="#fff",t.style.background="#b35656",t.style.borderBottom="3px solid #aa0000",t.style.padding="5px 15px 5px 15px",t.innerText="Your Image couldn't be changed",setTimeout((function(){t.style.display="none"}),5e3)}))},setPass:function(){var t=this,e=new FormData;if(document.getElementById("inpPasswordConf").value!=document.getElementById("inpPassword").value){var s=document.getElementById("passRes");return s.style.display="block",s.style.textAlign="center",s.style.color="#fff",s.style.background="#b35656",s.style.borderBottom="3px solid #aa0000",s.style.padding="5px 15px 5px 15px",s.innerText="Your passwords doesn't match",setTimeout((function(){s.style.display="none"}),5e3),null}if(document.getElementById("inpPasswordCur").value.length<5){var n=document.getElementById("passRes");n.style.display="block",n.style.textAlign="center",n.style.color="#fff",n.style.background="#b35656",n.style.borderBottom="3px solid #aa0000",n.style.padding="5px 15px 5px 15px",n.innerText="Insert your current password",setTimeout((function(){n.style.display="none"}),5e3);var a=document.getElementById("inpPasswordCur");return a.style.boxShadow="0 0 8px #ff0000",a.style.color="#ff0000",null}e.append("newPassword",document.getElementById("inpPasswordConf").value),e.append("currPassword",document.getElementById("inpPasswordCur").value),r.a.post("/api/pass",e).then((function(e){if(200==e.status){var s=document.getElementById("passRes");s.style.display="block",s.style.textAlign="center",s.style.color="#fff",s.style.background="#529c52",s.style.borderBottom="3px solid #00aa00",s.style.padding="5px 15px 5px 15px",s.innerText="Your password was changed",setTimeout((function(){s.style.display="none"}),5e3),r.a.get("/api/logout").then((function(){localStorage.removeItem("beacon"),t.$store.commit("logOut"),t.$router.push("/")}))}else if(202==e.status){var n=document.getElementById("passRes");n.style.display="block",n.style.textAlign="center",n.style.color="#fff",n.style.background="#b35656",n.style.borderBottom="3px solid #aa0000",n.style.padding="5px 15px 5px 15px",n.innerText="New password is too short",setTimeout((function(){n.style.display="none"}),5e3)}})).catch((function(){var t=document.getElementById("passRes");t.style.display="block",t.style.textAlign="center",t.style.color="#fff",t.style.background="#b35656",t.style.borderBottom="3px solid #aa0000",t.style.padding="5px 15px 5px 15px",t.innerText="Your password couldn't be changed",setTimeout((function(){t.style.display="none"}),5e3)}))}},mounted:function(){document.getElementById("inpPassword").addEventListener("input",(function(){document.getElementById("inpPassword").value.length>0?document.getElementById("newControls").style.display="flex":document.getElementById("newControls").style.display="none"})),document.getElementById("inpPasswordConf").addEventListener("input",(function(){var t=document.getElementById("inpPasswordConf"),e=document.getElementById("inpPassword");t.value.length>0&&e.value!=t.value?(t.style.boxShadow="0 0 8px #ff0000",t.style.color="#ff0000"):(t.style.boxShadow="none",t.style.color="#000000")})),document.getElementById("inpPasswordCur").addEventListener("input",(function(){var t=document.getElementById("inpPasswordCur");t.style.boxShadow="none",t.style.color="#000000"}))}},d=l,u=(s("7f1a"),s("2877")),c=Object(u["a"])(d,n,a,!1,null,"eeeeb238",null);e["default"]=c.exports},dbe8:function(t,e,s){},fc1d:function(t,e,s){}}]);
//# sourceMappingURL=chunk-2216555a.3db50db7.js.map